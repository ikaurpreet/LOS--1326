<template>
  <div class="wrapper" style="position:relative;">
    <template if:true={error}>
        <c-mortgages-error error={error} onclose={closeError}></c-mortgages-error>
    </template>
    <template if:true={loading}>
      <div class="wrapper" style="position:relative; width:100%; height:830px;"></div>
        <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
      </div>
    </template>
    <template if:false={previewNotGenerated}>
      <template if:true={url}>   
        <div class="slds-card" style="padding: 1px;">
          <iframe src={url} onload={onload} style="width: 100%; height: 830px; border:none;"></iframe>
        </div>
      </template>
    </template>
    <template if:true={previewNotGenerated}>
      <div class="slds-card">
        <div class="slds-media__body slds-p-around_small">
          <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error" style="white-space:normal;" role="alert">
            <lightning-icon class="slds-m-right_x-small" icon-name="utility:error" variant="inverse" size="x-small" alternative-text="Error" title="Error"></lightning-icon>
            <h2 style="white-space:normal;">PDF preview not generated</h2>
          </div>
        </div>
        <footer class="slds-card__footer">
          <lightning-button variant="brand" label="Generate PDF" title="Generate PDF preview" onclick={generatePdfClick} class="slds-m-top_x-small"></lightning-button>
        </footer>
      </div>
    </template>
  </div>
</template>